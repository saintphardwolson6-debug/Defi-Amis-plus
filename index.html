<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DÃ©fi-Amis+ Premium</title>
  <link rel="stylesheet" href="style.css">
  <script type="module">
    import { texts, getLang, setLang } from "./lang.js";

    const lang = getLang();
    window.addEventListener("DOMContentLoaded", () => {
      const t = texts[lang];
      document.getElementById("title").textContent = t.title;
      document.getElementById("desc").textContent = t.desc;
      document.getElementById("playBtn").textContent = t.play;
      document.getElementById("createBtn").textContent = t.create;
      document.getElementById("vipText").innerHTML = `${t.vip}<br>${t.payment}`;
      document.getElementById("vipBtn").textContent = t.becomeVIP;
    });

    window.changeLang = setLang;
  </script>
</head>
<body>
  <audio id="bg-music" src="assets/theme.mp3" autoplay loop></audio>

  <div class="lang-select">
    ğŸŒ <select onchange="changeLang(this.value)">
      <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
      <option value="en">ğŸ‡ºğŸ‡¸ English</option>
      <option value="ht">ğŸ‡­ğŸ‡¹ KreyÃ²l</option>
    </select>
  </div>

  <div class="container">
    <h1 id="title"></h1>
    <p id="desc"></p>

    <button id="playBtn"></button>
    <button id="createBtn" class="locked"></button>

    <div class="vip-section">
      <p id="vipText"></p>
      <a href="peman.html" id="vipBtn" class="vip-btn"></a>
    </div>
  </div>

  <script>
    const vip = localStorage.getItem("isVIP");
    const btn = document.getElementById("createBtn");
    const lang = localStorage.getItem("lang") || "fr";

    const msg = {
      fr: "âŒ Tu dois Ãªtre VIP pour crÃ©er un dÃ©fi !",
      en: "âŒ You must be VIP to create a challenge!",
      ht: "âŒ Ou dwe VIP pou kreye DÃ©fi!",
    };

    if (vip === "true") {
      btn.classList.remove("locked");
      btn.innerText = lang === "fr" ? "âœ¨ CrÃ©er mon dÃ©fi" : lang === "en" ? "âœ¨ Create my challenge" : "âœ¨ Kreye DÃ©fi mwen";
      btn.onclick = () => location.href = "defi.html";
    } else {
      btn.onclick = () => alert(msg[lang]);
    }

    document.getElementById("playBtn").onclick = () => {
      window.location.href = "defi.html";
    };
  </script>
</body>
</html>